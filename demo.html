<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ã–nizleme Modu</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* --- KUTLAMA SAYFASI Ã–ZEL CSS (View.html ile birebir aynÄ±) --- */
        #celebrationPage {
            display: none;
            width: 100%;
            min-height: 100vh;
            flex-direction: column;
            align-items: center;
            padding-bottom: 50px;
            opacity: 0;
            transition: opacity 1s ease;
            overflow-x: hidden;
        }

        .gallery-section {
            width: 100%;
            height: 85vh;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
        }

        /* Demo iÃ§in CSS override (Style.css'den Ã§ekemezse diye garanti) */
        .box { position: relative; width: 260px; height: 380px; transform-style: preserve-3d; animation: rotate 30s linear infinite; }
        @keyframes rotate { 0% { transform: perspective(1000px) rotateY(0deg); } 100% { transform: perspective(1000px) rotateY(360deg); } }
        .dream { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform-style: preserve-3d; }
        .dream span { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform-origin: center; transform-style: preserve-3d; transform: rotateY(calc(var(--i) * 45deg)) translateZ(550px); -webkit-box-reflect: below 2px linear-gradient(transparent, transparent, rgba(0,0,0,0.2)); }
        .dream span img { width: 100%; height: 100%; object-fit: cover; border-radius: 15px; border: 3px solid rgba(255,255,255,0.8); box-shadow: 0 0 15px rgba(255,255,255,0.3); }

        .timer-section { width: 100%; display: flex; flex-direction: column; align-items: center; margin-bottom: 50px; z-index: 20; }
        .timeline-section { width: 100%; max-width: 800px; position: relative; padding: 20px; margin-bottom: 50px; }
        .timeline-section::before { content: ''; position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 4px; height: 100%; background: rgba(255, 255, 255, 0.3); border-radius: 2px; }
        .timeline-item { width: 100%; margin-bottom: 40px; position: relative; display: flex; justify-content: center; }
        .timeline-dot { position: absolute; left: 50%; top: 20px; transform: translateX(-50%); width: 20px; height: 20px; background: #fff; border: 4px solid #e73c7e; border-radius: 50%; z-index: 2; box-shadow: 0 0 15px rgba(231, 60, 126, 0.6); }
        .timeline-content { width: 45%; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.3); color: white; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .timeline-item:nth-child(odd) .timeline-content { margin-right: auto; text-align: right; }
        .timeline-item:nth-child(even) .timeline-content { margin-left: auto; text-align: left; }
        .timeline-date { font-size: 0.9rem; font-weight: 700; color: #ffd700; display: block; margin-bottom: 5px; }
        .promises-section { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; padding: 20px; }
        .promise-card { background: rgba(255,255,255,0.9); padding: 20px; border-radius: 20px; width: 260px; text-align: center; color: #333; transform: rotate(-2deg); transition: 0.3s; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .promise-card:nth-child(2) { transform: rotate(2deg); margin-top: 20px; }
        .promise-card:hover { transform: scale(1.05) rotate(0deg); z-index: 10; }
        .love-timer-container { text-align: center; }
        .timer-box { display: flex; justify-content: center; gap: 10px; margin-top: 10px; }
        .time-segment { background: rgba(255, 255, 255, 0.25); backdrop-filter: blur(5px); padding: 10px; border-radius: 10px; min-width: 70px; border: 1px solid rgba(255,255,255,0.3); color: white; display: flex; flex-direction: column; align-items: center; }
        .time-segment span { font-size: 1.5rem; font-weight: 700; }
        .time-segment label { font-size: 0.7rem; text-transform: uppercase; }

        @media (max-width: 768px) {
            .gallery-section { height: 60vh; }
            .timeline-section::before { left: 20px; }
            .timeline-dot { left: 20px; }
            .timeline-content { width: 80%; margin-left: 50px !important; text-align: left !important; }
            .timeline-item:nth-child(odd) .timeline-content { margin-right: 0; }
            .promise-card { width: 100%; transform: rotate(0deg) !important; margin-top: 10px !important; }
        }
    </style>
</head>
<body>
    
    <div id="startOverlay">
        <button class="start-btn" id="startBtn">SÃ¼rprizi BaÅŸlat â¤ï¸</button>
    </div>

    <div class="background-overlay"></div>

    <div class="container" id="mainCard">
        <div class="card" data-aos="zoom-in" data-aos-duration="1200">
            <div class="content">
                <div id="iconContainer"></div>
                
                <h1 class="title" id="mainTitle"></h1>
                <p class="subtitle" id="mainSubtitle"></p>
            </div>
            
            <div class="buttons" id="btnGroup">
                <button class="btnYes" id="yesButton">EVET</button>
                <button class="btnNo" id="noButton">HAYIR</button>
            </div>
        </div>
    </div> 

    <div id="celebrationPage">
        
        <div class="gallery-section">
            <div class="box">
                <div class="dream" id="photoGallery"></div>
            </div>
        </div>

        <div class="timer-section" data-aos="fade-up">
            <h3 id="timerTitle" style="color:white; font-weight:300; letter-spacing:1px; margin-bottom:10px;">Seninle GeÃ§en Her Saniye...</h3>
            <div class="love-timer-container">
                <div class="timer-box">
                    <div class="time-segment"><span id="t-days">0</span><label>GÃ¼n</label></div>
                    <div class="time-segment"><span id="t-hours">00</span><label>Saat</label></div>
                    <div class="time-segment"><span id="t-minutes">00</span><label>Dk</label></div>
                    <div class="time-segment"><span id="t-seconds">00</span><label>Sn</label></div>
                </div>
            </div>
            <div style="margin-top:20px; color:rgba(255,255,255,0.8); font-size:0.9rem; animation: bounce 2s infinite;">
                <i class="fas fa-chevron-down"></i> AÅŸaÄŸÄ± KaydÄ±r <i class="fas fa-chevron-down"></i>
            </div>
        </div>

        <div class="timeline-section">
            <div class="timeline-item" data-aos="fade-right">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <span class="timeline-date" id="date-meet">BaÅŸlangÄ±Ã§</span>
                    <h3 id="t1-head">Hikayemiz BaÅŸladÄ±</h3>
                    <p id="t1-body">HayatÄ±mÄ±n en gÃ¼zel tesadÃ¼fÃ¼ seninle karÅŸÄ±laÅŸtÄ±ÄŸÄ±m o gÃ¼ndÃ¼...</p>
                </div>
            </div>
            <div class="timeline-item" data-aos="fade-left">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <span class="timeline-date">Ã–zel An</span>
                    <h3 id="t2-head">O BÃ¼yÃ¼lÃ¼ An</h3>
                    <p id="t2-body">GÃ¶zlerine ilk baktÄ±ÄŸÄ±mda evimi bulduÄŸumu hissettim.</p>
                </div>
            </div>
            <div class="timeline-item" data-aos="fade-right">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                    <span class="timeline-date">BugÃ¼n</span>
                    <h3 id="t3-head">SonsuzluÄŸa Ä°lk AdÄ±m</h3>
                    <p id="t3-body">Ve bugÃ¼n, Ã¶mrÃ¼mÃ¼ seninle birleÅŸtirme sÃ¶zÃ¼ veriyorum.</p>
                </div>
            </div>
        </div>

        <div class="promises-section" data-aos="zoom-in" id="bottomCards">
            </div>

        <h2 id="finalText" style="color:white; margin-bottom: 60px; text-shadow: 0 2px 10px rgba(0,0,0,0.3); text-align:center;">SÃ–Z VERÄ°YORUM â¤ï¸</h2>

    </div>
    
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script> AOS.init({ duration: 1000, once: false }); </script>

    <script>
        // --- SAYFA YÃœKLENÄ°NCE (DEMO AYARLARI) ---
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const type = urlParams.get('type'); // ?type=apology gibi

            // VarsayÄ±lan (AÅŸk Modu)
            let config = {
                title: "Benimle Evlenir Misin?",
                subtitle: "Ã–mrÃ¼mÃ¼n geri kalanÄ± olur musun?",
                yesMsg: "Sonsuza kadar EVET! â¤ï¸",
                btnYes: "EVET ğŸ’", btnNo: "HAYIR ğŸ’”", emoji: 'â¤ï¸',
                timer: "Seninle GeÃ§en Her Saniye...", final: "SÃ–Z VERÄ°YORUM â¤ï¸",
                icon: `<div class="ring-animation"><img src="https://pngimg.com/uploads/ring/ring_PNG26.png" class="ring-img"></div>`,
                cards: `
                    <div class="promise-card"><h3>â¤ï¸</h3><p>Seni her gÃ¼n, ilk gÃ¼nkÃ¼ heyecanla seveceÄŸime...</p></div>
                    <div class="promise-card"><h3>ğŸ¤</h3><p>En zor gÃ¼nlerinde bile elini hiÃ§ bÄ±rakmayacaÄŸÄ±ma...</p></div>
                    <div class="promise-card"><h3>ğŸ¡</h3><p>Huzurlu, mutlu ve aÅŸk dolu bir yuvamÄ±z olacaÄŸÄ±na...</p></div>`,
                t1: {h:"Hikayemiz BaÅŸladÄ±", p:"HayatÄ±mÄ±n en gÃ¼zel tesadÃ¼fÃ¼ seninle karÅŸÄ±laÅŸtÄ±ÄŸÄ±m o gÃ¼ndÃ¼..."},
                t2: {h:"O BÃ¼yÃ¼lÃ¼ An", p:"GÃ¶zlerine ilk baktÄ±ÄŸÄ±mda evimi bulduÄŸumu hissettim."},
                t3: {h:"SonsuzluÄŸa Ä°lk AdÄ±m", p:"Ve bugÃ¼n, Ã¶mrÃ¼mÃ¼ seninle birleÅŸtirme sÃ¶zÃ¼ veriyorum."}
            };

            // MODLARA GÃ–RE DEÄÄ°ÅÄ°KLÄ°KLER
            if(type === 'birthday') {
                config = {
                    title: "Ä°yi Ki DoÄŸdun!", subtitle: "Nice mutlu yaÅŸlara...",
                    yesMsg: "Ä°yi Ki VarsÄ±n! ğŸ‰", btnYes: "KUTLA ğŸ‰", btnNo: "HAYIR ğŸ‚", emoji: 'ğŸ‰',
                    timer: "DÃ¼nyayÄ± GÃ¼zelleÅŸtirdiÄŸin SÃ¼re...", final: "Ä°YÄ° KÄ° DOÄDUN! ğŸ‚",
                    icon: `<div class="cake-wrapper"><div class="flame"></div><img src="https://i.ibb.co/2Z7fVfM/cake-icon.png" class="cake-img"></div>`,
                    cards: `
                        <div class="promise-card"><h3>ğŸ’Š</h3><p>Yeni yaÅŸÄ±nda saÄŸlÄ±k seninle olsun...</p></div>
                        <div class="promise-card"><h3>ğŸš€</h3><p>TÃ¼m hayallerine ulaÅŸmanÄ± dilerim...</p></div>
                        <div class="promise-card"><h3>ğŸ¥³</h3><p>YÃ¼zÃ¼nden gÃ¼lÃ¼cÃ¼kler hiÃ§ eksik olmasÄ±n...</p></div>`,
                    t1: {h:"DÃ¼nyaya Merhaba", p:"Senin doÄŸduÄŸun gÃ¼n, dÃ¼nya daha gÃ¼zel bir yer oldu."},
                    t2: {h:"En GÃ¼zel AnÄ±lar", p:"Birlikte biriktirdiÄŸimiz onca gÃ¼zel anÄ±dan sadece biri..."},
                    t3: {h:"Yeni YaÅŸÄ±n", p:"Yeni yaÅŸÄ±nda tÃ¼m dileklerinin gerÃ§ekleÅŸmesini diliyorum."}
                };
            } else if(type === 'apology') {
                config = {
                    title: "Beni Affeder Misin?", subtitle: "Seni kÄ±rmak isteyeceÄŸim son ÅŸeydi...",
                    yesMsg: "TeÅŸekkÃ¼r Ederim â¤ï¸", btnYes: "AFFET ğŸ¤", btnNo: "ASLA ğŸ’”", emoji: 'ğŸ¥º',
                    timer: "Sensiz GeÃ§en Zor Zaman...", final: "BÄ°R DAHA ASLA... ğŸ˜¿",
                    icon: `<img src="https://cdn-icons-png.flaticon.com/512/742/742751.png" width="100" style="filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));">`,
                    cards: `
                        <div class="promise-card"><h3>ğŸ˜</h3><p>HatamÄ±n farkÄ±ndayÄ±m ve Ã§ok Ã¼zgÃ¼nÃ¼m...</p></div>
                        <div class="promise-card"><h3>ğŸŒ¹</h3><p>Telafi etmek iÃ§in her ÅŸeyi yapmaya hazÄ±rÄ±m...</p></div>
                        <div class="promise-card"><h3>â¤ï¸</h3><p>Seni kaybetmekten Ã§ok korkuyorum...</p></div>`,
                    t1: {h:"Hata YaptÄ±m", p:"O an dÃ¼ÅŸÃ¼nemedim, seni kÄ±rdÄ±m. Ã‡ok piÅŸmanÄ±m."},
                    t2: {h:"PiÅŸmanlÄ±k", p:"Seni Ã¼zdÃ¼ÄŸÃ¼mÃ¼ anladÄ±ÄŸÄ±m an dÃ¼nya baÅŸÄ±ma yÄ±kÄ±ldÄ±."},
                    t3: {h:"Ã–zÃ¼r Dilerim", p:"LÃ¼tfen beni affet, bir ÅŸans daha ver."}
                };
            } else if(type === 'distance') {
                config = {
                    title: "Mesafeler AÅŸka Engel DeÄŸil", subtitle: "Kalbim her zaman seninle...",
                    yesMsg: "Seni Seviyorum! âœˆï¸", btnYes: "KAVUÅACAÄIZ â¤ï¸", btnNo: "ZOR ğŸ’”", emoji: 'âœˆï¸',
                    timer: "KavuÅŸmaya Kalan SÃ¼re...", final: "BEKLEMEYE DEÄER â¤ï¸",
                    icon: `<img src="https://cdn-icons-png.flaticon.com/512/619/619055.png" width="100" style="filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));">`,
                    cards: `
                        <div class="promise-card"><h3>ğŸŒ</h3><p>AramÄ±zda ne kadar yol olursa olsun...</p></div>
                        <div class="promise-card"><h3>ğŸ’Œ</h3><p>Kalbim her saniye senin yanÄ±nda atÄ±yor...</p></div>
                        <div class="promise-card"><h3>ğŸ“…</h3><p>KavuÅŸacaÄŸÄ±mÄ±z o gÃ¼nÃ¼ iple Ã§ekiyorum...</p></div>`,
                    t1: {h:"AyrÄ±lÄ±k Vakti", p:"HavalimanÄ±ndaki o son bakÄ±ÅŸ hala aklÄ±mda..."},
                    t2: {h:"Ã–zlem", p:"Her gece resmine bakÄ±p seni dÃ¼ÅŸÃ¼nÃ¼yorum."},
                    t3: {h:"KavuÅŸma", p:"SarÄ±lacaÄŸÄ±mÄ±z o gÃ¼nÃ¼ sabÄ±rsÄ±zlÄ±kla bekliyorum..."}
                };
            }

            // HTML DOLDURMA
            document.getElementById('iconContainer').innerHTML = config.icon;
            document.getElementById('mainTitle').innerText = config.title;
            document.getElementById('mainSubtitle').innerText = config.subtitle;
            document.getElementById('yesButton').innerText = config.btnYes;
            document.getElementById('noButton').innerText = config.btnNo;
            document.getElementById('timerTitle').innerText = config.timer;
            document.getElementById('finalText').innerText = config.final;
            document.getElementById('bottomCards').innerHTML = config.cards;
            
            // Timeline Doldurma
            document.getElementById('t1-head').innerText = config.t1.h; document.getElementById('t1-body').innerText = config.t1.p;
            document.getElementById('t2-head').innerText = config.t2.h; document.getElementById('t2-body').innerText = config.t2.p;
            document.getElementById('t3-head').innerText = config.t3.h; document.getElementById('t3-body').innerText = config.t3.p;

            // Galeri Doldurma (Demo Resimler)
            const gallery = document.getElementById('photoGallery');
            for(let i=1; i<=8; i++) {
                const s = document.createElement('span'); s.style.setProperty('--i',i);
                const img = document.createElement('img'); img.src=`https://picsum.photos/400/600?random=${i + (type==='birthday'?50:10)}`;
                s.appendChild(img); gallery.appendChild(s);
            }

            // --- BUTON VE EFEKTLER ---
            const yesBtn = document.getElementById('yesButton');
            const noBtn = document.getElementById('noButton');
            
            yesBtn.addEventListener('click', () => {
                startConfetti(config.emoji);
                document.getElementById('mainTitle').innerText = config.yesMsg;
                document.getElementById('btnGroup').style.display='none';
                setTimeout(() => {
                    document.getElementById('mainCard').style.opacity='0';
                    setTimeout(() => {
                        document.getElementById('mainCard').style.display='none';
                        document.getElementById('celebrationPage').style.display='flex';
                        setTimeout(()=>document.getElementById('celebrationPage').style.opacity='1',100);
                        startLoveTimer();
                    },500);
                },2000);
            });

            // Troll Buton
            let escapeCount = 0;
            const noTexts = ["Emin misin?", "Bir daha dÃ¼ÅŸÃ¼n?", "Son kararÄ±n mÄ±?", "KÄ±rma kalbimi...", "BasamazsÄ±n ki :)"];
            
            function moveButton() {
                if(escapeCount < 5) {
                    noBtn.innerText = noTexts[escapeCount];
                    const x = Math.random() * (window.innerWidth - 100);
                    const y = Math.random() * (window.innerHeight - 50);
                    noBtn.style.position = 'absolute'; noBtn.style.left = x+'px'; noBtn.style.top = y+'px';
                    escapeCount++;
                } else {
                    noBtn.style.display = 'none';
                }
            }
            noBtn.addEventListener('mouseover', moveButton);
            noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveButton(); });

            // GiriÅŸ Animasyonu
            document.getElementById('startBtn').addEventListener('click', () => {
                document.getElementById('startOverlay').style.opacity='0';
                setTimeout(()=>document.getElementById('startOverlay').style.display='none',1000);
                typeWriter("mainTitle", config.title, 90, () => {
                    typeWriter("mainSubtitle", config.subtitle, 50, () => {
                        document.getElementById('btnGroup').style.opacity='1';
                    });
                });
            });
        });

        // SayaÃ§
        function startLoveTimer() {
            const d = new Date(); d.setFullYear(d.getFullYear()-1);
            document.getElementById('date-meet').innerText = d.toLocaleDateString('tr-TR');
            setInterval(() => {
                const now = new Date(); const diff = now - d;
                document.getElementById('t-days').innerText = Math.floor(diff/(1000*60*60*24));
                document.getElementById('t-hours').innerText = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
                document.getElementById('t-minutes').innerText = Math.floor((diff%(1000*60*60))/(1000*60));
                document.getElementById('t-seconds').innerText = Math.floor((diff%(1000*60))/1000);
            }, 1000);
        }

        // Daktilo
        function typeWriter(id, txt, spd, cb) {
            let i=0; document.getElementById(id).innerHTML="";
            function t() { if(i<txt.length){ document.getElementById(id).innerHTML+=txt.charAt(i); i++; setTimeout(t,spd); } else if(cb) cb(); } t();
        }

        // Konfeti
        function startConfetti(c) {
            for(let i=0;i<50;i++) {
                setTimeout(()=>{
                    let h=document.createElement('div'); h.className='heart'; h.innerHTML=c;
                    h.style.left=Math.random()*100+'vw'; h.style.animationDuration=Math.random()*2+3+'s';
                    document.body.appendChild(h);
                }, i*100);
            }
        }
    </script>
</body>
</html>